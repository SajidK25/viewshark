{"apps":{"http":{"servers":{"srv0":{"errors":{"routes":[{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"subroute","routes":[{"group":"group1","handle":[{"handler":"rewrite","uri":"/parser.php?error=404"}],"match":[{"expression":"{http.error.status_code} == 404"}]},{"handle":[{"handler":"static_response","headers":{"Location":["{http.request.orig_uri.path}/{http.request.orig_uri.prefixed_query}"]},"status_code":308}],"match":[{"file":{"try_files":["{http.request.uri.path}/index.php"]},"not":[{"path":["*/"]}]}]},{"handle":[{"handler":"rewrite","uri":"{http.matchers.file.relative}"}],"match":[{"file":{"split_path":[".php"],"try_files":["{http.request.uri.path}","{http.request.uri.path}/index.php","index.php"],"try_policy":"first_exist_fallback"}}]},{"handle":[{"handler":"reverse_proxy","transport":{"protocol":"fastcgi","split_path":[".php"]},"upstreams":[{"dial":"php:9000"}]}],"match":[{"path":["*.php"]}]}]}]}]}],"match":[{"host":["test.watchmaji.com"]}],"terminal":true}]},"listen":[":443"],"routes":[{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"vars","root":"/srv/viewshark"}]},{"handle":[{"handler":"headers","response":{"set":{"Cache-Control":["public, max-age=604800"]}}}],"match":[{"path":["*.ico","*.pdf","*.flv","*.gif","*.jpg","*.jpeg","*.png","*.svg","*.webp","*.css","*.js","*.eot","*.woff","*.otf","*.ttf"]}]},{"handle":[{"handler":"headers","response":{"set":{"Referrer-Policy":["strict-origin-when-cross-origin"],"X-Content-Type-Options":["nosniff"]}}}]},{"handle":[{"handler":"static_response","headers":{"Location":["/"]},"status_code":301}],"match":[{"path_regexp":{"name":"oldhome","pattern":"^.*/home$"}}]},{"group":"group2","handle":[{"handler":"rewrite","uri":"/f_modules/m_backend/parser.php"}],"match":[{"path":["/admin","/admin/*"]}]},{"group":"group2","handle":[{"handler":"rewrite","uri":"/f_data/data_userfiles/user_media/default.mp4"}],"match":[{"path":["/previews/default.mp4"]}]},{"group":"group2","handle":[{"handler":"rewrite","uri":"/tests/preflight.php"}],"match":[{"path":["/preflight"]}]},{"group":"group2","handle":[{"handler":"rewrite","uri":"/f_data/data_userfiles/user_media/{http.regexp.prev_stream.1}/s/{http.regexp.prev_stream.2}.mp4"}],"match":[{"path_regexp":{"name":"prev_stream","pattern":"^/previews/s/([^/]+)/([^/]+)\\.mp4$"}}]},{"group":"group2","handle":[{"handler":"rewrite","uri":"/f_data/data_userfiles/user_media/{http.regexp.prev_video.1}/v/{http.regexp.prev_video.2}.mp4"}],"match":[{"path_regexp":{"name":"prev_video","pattern":"^/previews/([^/]+)/([^/]+)\\.mp4$"}}]},{"handle":[{"encodings":{"gzip":{},"zstd":{}},"handler":"encode","prefer":["zstd","gzip"]}]},{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"rewrite","strip_path_prefix":"/hls"}]},{"handle":[{"handler":"vars","root":"/var/www"},{"handler":"headers","response":{"set":{"Cache-Control":["no-cache"]}}},{"handler":"headers","response":{"set":{"Access-Control-Allow-Origin":["*"]}}},{"handler":"file_server","hide":["/etc/caddy/Caddyfile"]}]}]}],"match":[{"path":["/hls/*"]}]},{"handle":[{"handler":"static_response","status_code":403}],"match":[{"path":["*.inc","*.inc.php","*.shtml","*.cgi","*.pl","*.py","*.asp","*.aspx","*.sh","*.cin","*.tpl","*.tplb","*.log"]}]},{"handle":[{"handler":"static_response","headers":{"Location":["{http.request.orig_uri.path}/{http.request.orig_uri.prefixed_query}"]},"status_code":308}],"match":[{"file":{"try_files":["{http.request.uri.path}/index.php"]},"not":[{"path":["*/"]}]}]},{"handle":[{"handler":"rewrite","uri":"{http.matchers.file.relative}"}],"match":[{"file":{"split_path":[".php"],"try_files":["{http.request.uri.path}","{http.request.uri.path}/index.php","index.php"],"try_policy":"first_exist_fallback"}}]},{"handle":[{"handler":"reverse_proxy","transport":{"protocol":"fastcgi","split_path":[".php"]},"upstreams":[{"dial":"php:9000"}]}],"match":[{"path":["*.php"]}]},{"handle":[{"handler":"rewrite","uri":"{http.matchers.file.relative}"}],"match":[{"file":{"split_path":[".php"],"try_files":["{http.request.uri.path}","{http.request.uri.path}/","/parser.php?{http.request.uri.query}"]}}]},{"handle":[{"handler":"reverse_proxy","transport":{"protocol":"fastcgi","split_path":[".php"]},"upstreams":[{"dial":"php:9000"}]}],"match":[{"path":["*.php"]}]},{"handle":[{"handler":"file_server","hide":["/etc/caddy/Caddyfile"]}]}]}],"match":[{"host":["test.watchmaji.com"]}],"terminal":true}]}}},"tls":{"automation":{"policies":[{"issuers":[{"email":"hello@sami-ahmed.net","module":"acme"},{"ca":"https://acme.zerossl.com/v2/DV90","email":"hello@sami-ahmed.net","module":"acme"}],"subjects":["test.watchmaji.com"]}]}}}}